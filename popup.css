/* popup.css */
/* Styling for the AI Assistant popup window */

/* Basic reset and body styling */
body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji';
    margin: 0;
    padding: 0;
    background-color: #f8f9fa; /* Lighter background */
    color: #212529; /* Darker text for better contrast */
    overflow: hidden; /* Prevent scrollbars on the body itself */
    border: 1px solid #dee2e6; /* Slightly softer border */
    border-radius: 8px; /* Rounded corners for the window */
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15); /* More pronounced shadow */
    font-size: 14px; /* Base font size */
}

/* Main container styling */
.container {
    padding: 16px; /* Slightly more padding */
    display: flex;
    flex-direction: column;
    /* Calculate height considering padding */
    height: calc(100vh - 32px);
    position: relative; /* Needed for absolute positioning of the close button */
    box-sizing: border-box; /* Include padding in height calculation */
}

/* Close Button Styling */
.close-button {
    position: absolute;
    top: 8px; /* Position from top */
    right: 8px; /* Position from right */
    background: #e9ecef; /* Lighter background */
    border: 1px solid #ced4da; /* Matching border */
    color: #495057; /* Subdued color */
    font-size: 18px; /* Slightly larger */
    font-weight: bold;
    width: 28px; /* Larger click target */
    height: 28px; /* Larger click target */
    border-radius: 50%; /* Circular */
    cursor: pointer;
    line-height: 26px; /* Adjust line height to center 'x' */
    text-align: center;
    transition: background-color 0.2s ease, color 0.2s ease, transform 0.1s ease;
    z-index: 10; /* Ensure it's above other elements */
    padding: 0; /* Remove default padding */
}

.close-button:hover {
    background-color: #f76e6e; /* Reddish hover */
    color: white;
    border-color: #f14e4e;
}

.close-button:active {
    background-color: #e84343; /* Darker red on click */
    transform: scale(0.95); /* Slight shrink effect */
}

/* Screenshot Container Styling */
.screenshot-container {
    flex: 1; /* Allow it to grow and fill available space */
    background-color: #e9ecef; /* Match close button background */
    border: 1px dashed #adb5bd; /* Softer dashed border */
    border-radius: 6px;
    margin-bottom: 12px; /* Space below screenshot */
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden; /* Hide parts of image if too big */
    min-height: 150px; /* Minimum height */
    position: relative; /* For positioning loading text */
}

/* Screenshot Image Styling */
#screenshot-image {
    max-width: 100%;
    max-height: 100%;
    display: block; /* Remove extra space below image */
    object-fit: contain; /* Scale image while preserving aspect ratio */
    border-radius: 4px; /* Slightly rounded corners for the image itself */
}

/* Loading Text Styling */
#loading-screenshot {
    color: #6c757d; /* Bootstrap's secondary text color */
    font-style: italic;
    position: absolute; /* Center it within the container */
    text-align: center;
}

/* Interaction Area Styling (Textarea + Button) */
.interaction-area {
    display: flex;
    gap: 8px; /* Space between textarea and button */
    margin-bottom: 12px;
}

/* Textarea Styling */
#question-input {
    flex-grow: 1; /* Textarea takes available width */
    padding: 10px 12px; /* More padding */
    border: 1px solid #ced4da;
    border-radius: 4px;
    font-size: 14px;
    resize: none; /* Prevent manual resizing */
    box-sizing: border-box;
    background-color: #fff; /* White background */
    line-height: 1.4; /* Improve readability */
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

#question-input:focus {
    border-color: #80bdff; /* Blue border on focus */
    outline: 0;
    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25); /* Subtle glow on focus */
}

/* Submit Button Styling */
#submit-button {
    padding: 10px 18px; /* More padding */
    background-color: #007bff; /* Primary blue */
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500; /* Slightly bolder */
    transition: background-color 0.2s ease, transform 0.1s ease;
    white-space: nowrap; /* Prevent text wrapping */
}

#submit-button:hover {
    background-color: #0056b3; /* Darker blue on hover */
}

#submit-button:active {
    transform: scale(0.98); /* Slight shrink effect */
}

#submit-button:disabled {
    background-color: #6c757d; /* Gray when disabled */
    cursor: not-allowed;
    opacity: 0.65; /* Make it look faded */
}

/* Response Area Styling */
.response-area {
    background-color: #ffffff;
    border: 1px solid #e0e0e0; /* Lighter border */
    border-radius: 4px;
    padding: 12px;
    min-height: 60px; /* Minimum height */
    max-height: 180px; /* Maximum height before scroll */
    overflow-y: auto; /* Add scrollbar if content exceeds max-height */
    font-size: 14px;
    line-height: 1.6; /* Increased line height for readability */
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.05); /* Subtle inner shadow */
}

/* Response Content Styling */
.response-content {
     white-space: pre-wrap; /* Preserve whitespace and wrap text */
     word-wrap: break-word; /* Break long words */
     color: #343a40; /* Slightly darker text */
}

/* Response Area Paragraph Styling */
.response-area p {
    margin-top: 0;
    margin-bottom: 6px;
    color: #495057; /* Slightly muted color for the "AI Response:" label */
    font-weight: 600; /* Bolder label */
}

/* Loading Indicator Styling */
.loading {
    text-align: center;
    padding: 15px 0; /* More vertical padding */
}

.loading span {
    display: inline-block;
    width: 10px; /* Larger dots */
    height: 10px; /* Larger dots */
    background-color: #007bff;
    border-radius: 50%;
    margin: 0 3px; /* More space between dots */
    /* Animation definition */
    animation: bounce 1.4s infinite ease-in-out both;
}

/* Animation delays for the dots */
.loading span:nth-child(1) { animation-delay: -0.32s; }
.loading span:nth-child(2) { animation-delay: -0.16s; }
/* The third span uses the base delay (0s) */

/* Keyframes for the bouncing animation */
@keyframes bounce {
    0%, 80%, 100% { transform: scale(0); opacity: 0.5; }
    40% { transform: scale(1.0); opacity: 1; }
}
